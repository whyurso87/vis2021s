<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="utf-8">
    <title>Lab 8</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@900&display=swap');

        h1, div {
          background-color: rgba(255, 255, 0, 0.1);
          font-family: 'Noto Serif JP', serif;
          font-size: 24pt;
          border: solid 1px black;
          width: 90%;
          margin: 5px auto;
          padding: 10px;
        }

        div {
          font-size: 12pt;
        }

        body {
            background-color: rgba(255, 128, 255, 0.1);
        }

        video:hover {
            box-shadow: 0 0 1px 1px rgba(255, 140, 186, 0.5);
        }

        .path {
          stroke-dasharray: 1000;
          stroke-dashoffset: 1000;
          animation: dash 7s linear forwards;
        }
        @keyframes dash {
          to {
            stroke-dashoffset: 0;
          }
        }
    </style>
    <script src="https://d3js.org/d3.v6.min.js" charset="utf-8"></script> <!-- v6.5.0 -->
</head>
<body>
  <h1>
        lab08 漢字書寫 (鉛筆字) (毛筆字也OK!) Path Animation
    </h1>
    <div>
      限定使用 D3.js，參考以下影片。
           <ul>
    		<li><a href="https://bl.ocks.org/basilesimon/f164aec5758d16d51d248e41af5428e4">Animate path in D3</a></li>
    		<li><a href="https://codepen.io/MyXoToD/post/howto-self-drawing-svg-animation">"Self-Drawing" SVG</a></li>
    		<li><a href="https://stackoverflow.com/questions/15275362/how-to-transition-a-path-in-d3-js">How to transition a path in d3.js</a></li>
        <li><a href="https://css-tricks.com/svg-line-animation-works/">How SVG Line Animation Works</a></li>
        <li><a href="http://blog.roachking.net/blog/2014/10/31/osolve-team-drawing-animation/">使用 SVG 將圖片做成動畫</a></li>
        <li><a href="https://www.hesyifei.com/">何一非</a></li>
    	</ul>
    </div>
    
    <div>
  		<video width="400" controls loop autoplay>
  		  <source src="3.mp4" type="video/mp4">
  		</video>
    </div>
    <div>
      展示區 (姓名)
      <hr>
      <img width="256" src="./HAUNG.svg">
      <img width="256" src="./KUAN.svg">
      <img width="256" src="./MING.svg">
    </div>

    <div>手寫動畫區 (姓名)
      <hr>
      <svg id="svg1" height="350" width="300">
      </svg>
      <svg id="svg2" height="350" width="300">
      </svg>
      <svg id="svg3" height="350" width="300">
      </svg>
    </div>
    
<!--
    <div>
      Drag and Drop 展示區 (接收任何SVG)
      <hr>
    </div>
-->

    <script type="text/javascript">
    var line = d3.line();
    

    var first = ["m 42.479568,101.02283 c -2.52725,4.5851 -1.427885,8.22723 -1.427885,13.92188 0,1.38271 -0.362077,2.85066 0.713941,3.92668 0.565809,0.56581 2.862607,1.62146 3.21274,1.78486 1.061974,0.49559 2.092646,1.08324 3.212741,1.42788 1.113395,0.34259 11.406317,0.30027 13.207933,0 0.96787,-0.16131 1.8879,-0.55263 2.85577,-0.71394 1.927312,-0.32122 3.766322,-0.13038 5.711536,-0.71394 2.55719,-0.76716 1.731304,-0.71394 1.070915,-0.71394",
                 "m 72.465143,100.66586 c 0,0.47597 0.06731,0.95671 0,1.42789 -0.402568,2.81798 -0.35697,5.67772 -0.35697,8.56731 0,1.1899 0.23336,2.40291 0,3.56971 -1.164736,5.82367 -2.761988,4.02045 -1.070914,5.71154",
                 "m 29.985575,110.66106 c 3.212743,0 6.425483,0 9.638223,0 8.567307,0 17.134615,0 25.701921,0 1.905408,0 4.203155,-0.33916 6.06851,0 0.630447,0.11462 1.156518,0.58827 1.784855,0.71394 0.583399,0.11668 1.197999,-0.0978 1.784858,0 0.632064,0.10534 1.156515,0.58827 1.784856,0.71394 0.856882,0.17138 2.474386,-0.36918 3.21274,0 0.212857,0.10643 -0.168278,0.54567 0,0.71394 0.168278,0.16828 0.475962,0 0.713941,0 0.118991,0 -0.237979,0 -0.356971,0",
                 "m 24.631009,129.58053 c 3.807693,0 7.615386,0 11.423076,0 15.944712,0 31.889425,0 47.834134,0 2.987101,0 16.489031,0 11.066108,0",
                 "m 37.838943,139.93269 c 0.666462,9.11382 4.639744,17.84416 6.42548,26.77284 0.195964,0.97982 0,8.6594 0,5.71154",
                 "m 37.838943,139.93269 c 1.665864,0.95192 3.209393,2.16036 4.997596,2.85577 0.45725,0.17782 0.940633,-0.29965 1.427884,-0.35697 1.540817,-0.18127 3.090524,-0.29239 4.640625,-0.35697 2.955409,-0.12315 5.963166,0 8.924277,0 0.832935,0 1.72544,-0.30935 2.498799,0 2.317557,0.92702 4.362426,2.52059 5.711539,4.64062 0.263395,0.41391 0.03103,1.0612 0.356971,1.42789 0.68004,0.76504 1.814049,1.02402 2.498799,1.78485 0.881298,0.97923 0.572362,2.82189 1.070911,3.56971 0.14759,0.22139 0.525804,0.16884 0.713944,0.35698 0.815401,0.8154 0.356971,5.97556 0.356971,7.13942 0,0.74372 0.338875,5.39076 0,6.06851 -0.53208,1.06416 -2.141826,2.36287 -2.141826,3.56971",
                 "m 44.264423,172.41707 c 7.109555,-2.38636 14.421901,-1.78486 21.77524,-1.78486 1.427885,0 2.85577,0 4.283655,0 0.475961,0 -1.09133,-0.33656 -1.427885,0",
                 "m 44.264423,154.21154 c 1.665865,0 3.354396,-0.27387 4.997596,0 1.264129,0.21068 2.315636,1.16386 3.56971,1.42788 1.047944,0.22062 2.143676,-0.0629 3.212741,0 3.58635,0.21096 7.100501,0.35697 10.709134,0.35697",
                 "m 54.259614,146.0012 c -0.237979,0.71394 -0.713941,1.38926 -0.713941,2.14183 0,1.44758 0.475962,2.85577 0.713941,4.28365 0.356971,2.14183 0.592646,4.30744 1.070915,6.42548 0.356478,1.5787 1.11048,3.05361 1.427884,4.64063 0.202748,1.01373 0,2.74461 0,3.92668",
                 "m 54.616585,175.27284 c -0.118989,0.59495 0.02874,1.31649 -0.356971,1.78485 -1.951934,2.3702 -7.972814,7.00842 -10.352164,8.56731 -1.469554,0.96281 -3.165607,1.54437 -4.640625,2.4988 -0.565123,0.36566 -0.86782,1.05451 -1.427882,1.42788 -0.313087,0.20872 0.356971,-0.69463 0.356971,-1.07091",
                 "m 61.756009,178.48558 c 4.442192,3.55375 -1.575258,-1.32912 6.42548,5.71153 4.36976,3.84539 8.930783,7.47494 13.207934,11.42308 0.391019,0.36094 0.475961,0.95192 0.713941,1.42789 0.118991,0.23797 -0.23798,-0.47597 -0.356971,-0.71395"]

    var middle = ["m 20.347356,93.169469 c -1.932774,5.724747 -1.037091,11.629681 -1.427885,17.491591 -0.308235,4.62352 -0.512229,9.28246 -0.713942,13.92187 -0.247808,5.69958 0.28488,11.43701 0,17.13462 -0.262423,5.24845 -0.356971,10.44332 -0.356971,15.70673 0,5.59254 0,11.18509 0,16.77764 0,0.6293 0,6.07973 0,3.92668" ,
                  "m 20.347356,93.169469 c 2.855769,3e-6 5.711538,0 8.567308,0 0.920387,0 10.485546,-0.468765 11.423075,0 0.178221,0.08911 0,3.213682 0,4.640625 0,3.807696 0,7.615386 0,11.423076 0,0.80952 0.258379,3.6683 0,3.92668 -0.237979,0.23799 -0.56343,-0.41291 -0.713941,-0.71394",
                  "m 23.203125,102.80769 c 0.951923,-0.11899 1.89697,-0.32501 2.855769,-0.35697 2.616335,-0.0872 5.235578,0 7.853365,0 1.189903,0 2.379808,0 3.569711,0 0.594953,0 2.379808,0 1.784855,0",
                  "m 20.704327,113.51683 c 4.249878,0.33746 8.609739,-0.42413 12.850962,0 3.972925,0.39729 2.96092,2.03667 6.068509,-1.07092",
                  "m 52.474759,113.51683 c 0,-6.54447 0,-13.08895 0,-19.633417 7.615385,10e-7 15.23077,0 22.846154,0 0.51002,0 7.57116,-0.498074 8.567308,0 0.572883,0.286442 -0.947869,9.022997 -1.070913,9.638217 -0.519447,2.59724 -1.37435,3.55194 -1.784856,6.42549 -0.168278,1.17794 0.112814,2.38516 0,3.56971 -0.12613,1.32436 -0.593498,2.60179 -0.713942,3.92668 -0.391653,4.30818 0,8.87547 0,13.20793 0,3.38898 -0.320963,6.98206 0,10.35217 1.085298,11.39563 0.312309,-3.10157 1.427884,7.49639 0.438998,4.17047 0,8.64969 0,12.85096 0,4.40972 0.356971,8.79202 0.356971,13.20793 0,1.32735 0.522125,11.09277 0,12.13702 -0.159642,0.31929 -0.713942,0 -1.070913,0 -3.359984,0 -5.899795,-4.03058 -7.496394,-6.42548 -0.373375,-0.56006 -1.05451,-0.86782 -1.427885,-1.42788 -0.198012,-0.29702 0.112884,-0.73226 0,-1.07092 -0.168278,-0.50483 -0.475961,-0.95192 -0.713942,-1.42788",
                  "m 54.973558,106.73437 c 6.42548,0 12.85096,0 19.276441,0",
                  "m 52.474759,113.51683 c 0.594953,0.23798 1.146482,0.65843 1.784855,0.71394 6.346944,0.5519 13.745136,0 20.347355,0",
                  "m 36.768029,129.9375 c 2.354733,0.54778 4.351358,3.21274 6.782451,3.21274",
                  "m 57.829325,126.72476 c -1.689246,1.48176 -3.390858,3.49512 -5.354566,4.64062 -0.650047,0.3792 -1.481156,0.35358 -2.141826,0.71395 -4.178948,2.27942 -1.007136,2.22597 -6.782453,1.07091",
                  "m 33.198318,139.57572 c 3.765061,-0.3833 7.661852,0.41791 11.423076,0 1.925174,-0.21391 3.805759,-0.72441 5.711539,-1.07091 0.857758,-0.15596 3.569711,-0.57739 3.569711,-1.07092",
                  "m 37.124999,147.07211 c 5.957507,-0.0389 11.904888,-0.38374 17.848559,-0.71394 0.623006,-0.0346 3.980392,0.44016 4.640625,0 0.198011,-0.13201 0.106426,-0.50108 0,-0.71394 -0.26607,-0.53214 -1.189905,0 -1.784858,0",
                  "m 46.049279,142.78846 c -0.247367,1.39743 0.346313,2.8984 0,4.28365 -0.168278,0.67312 -0.804058,1.1444 -1.070915,1.78486 -0.333176,0.79963 -0.310483,1.73223 -0.713941,2.4988 -1.69188,3.21457 -4.019661,6.06668 -5.711539,9.28125 -0.643408,1.22247 -1.314873,3.55177 -2.141826,1.07091",
                  "m 46.049279,142.78846 c 0.707255,3.25801 0.406029,6.74128 3.21274,8.92428 3.518432,2.73656 0.180729,-0.51118 3.21274,2.14183 0.506569,0.44324 0.889397,1.02401 1.427885,1.42788 4.459438,3.34458 -1.478757,-1.63816 2.855769,1.07091 1.448261,0.90517 1.74992,2.14183 3.569711,2.14183"
]

    var last = ["m 27.486779,123.86899 c 0.237979,0.83293 0.591434,1.64124 0.713941,2.4988 0.23559,1.64912 0,3.33173 0,4.99759 0,4.04567 0,8.09135 0,12.13702 0,2.90169 0.538131,9.08939 0,11.78005 -0.033,0.16501 -0.237979,0.23798 -0.35697,0.35697 -0.118992,0.59495 -0.257226,1.18638 -0.356971,1.78486 -0.328859,1.97315 0.265766,1.61029 -0.713944,3.56971",
                "m 27.486779,123.86899 c 0.713941,0.35697 1.367446,0.87732 2.141826,1.07091 2.137733,0.53444 9.884682,0 12.137019,0 0.886095,0 2.367407,-0.28178 3.21274,0 0.754899,0.25163 1.850901,1.77148 2.141829,2.4988 0.227528,0.56883 -0.08734,1.53045 0,2.14183 0.203917,1.42742 0.609137,2.45942 0.713941,3.92668 0.445169,6.23237 0,12.666 0,18.91947 0,3.56971 0,7.13942 0,10.70914 0,0.35697 0,-0.71395 0,-1.07092",
                "m 33.198318,145.28726 c 4.045672,0 8.091345,0 12.137017,0",
                "m 26.772835,160.99399 c 8.789421,3.84537 2.44602,1.85569 11.780049,2.85577 2.599105,0.27847 4.022492,0.71394 6.42548,0.71394 0.475962,0 1.15124,0.38731 1.427885,0 0.557599,-0.78064 0.951923,-1.66587 1.427885,-2.4988",
                "m 62.112979,108.51923 c 0,0.95192 -0.111223,1.91037 0,2.85577 0.12818,1.08952 0.604785,2.12115 0.713944,3.21274 0.130239,1.3024 -0.05231,2.61883 0,3.92668 0.423429,10.58573 0.356971,21.1682 0.356971,31.77043 0,4.80656 0.382886,9.84973 0,14.63582 -0.33754,4.21925 -2.062787,8.46915 -3.212741,12.49399 -1.216874,4.25906 -2.395217,8.7549 -5.354568,12.13702 -1.885598,2.15497 -3.854194,3.58312 -6.06851,5.35457 -0.788416,0.63073 -1.301731,1.58176 -2.141826,2.14183 -0.408212,0.27214 -0.962451,-0.20183 -1.427885,-0.35698",
                "m 62.112979,108.51923 c 3.470841,-0.41148 7.660222,1.38416 11.066105,1.78485 1.990675,0.2342 7.446241,-0.61167 9.28125,0 0.504836,0.16828 0.923052,0.54567 1.427885,0.71395 0.732311,0.2441 2.722655,-0.49009 3.21274,0 0.538366,0.53836 0.141359,5.5138 0,7.13942 -0.271163,3.11838 -0.969163,6.1849 -1.427882,9.28125 -0.24661,1.66461 -0.475962,3.33173 -0.713944,4.9976 -0.237979,2.14182 -0.409178,4.29213 -0.713941,6.42548 -0.506103,3.54271 -1.427885,6.74656 -1.427885,10.35216 0,7.25841 0,14.51683 0,21.77524 0,4.28036 0.241163,8.66402 -0.356973,12.85096 -0.290695,2.03488 0.555006,8.88518 0,9.9952 -0.05321,0.10642 -0.303755,-0.10643 -0.35697,0 -0.191275,0.38255 0.295841,1.84598 0,2.14182 -0.420693,0.4207 -1.189903,0 -1.784856,0 -1.249021,0 -4.69484,-0.41119 -5.711539,-1.42788 -0.613169,-0.61317 -0.831471,-1.14927 -1.784855,-1.78486",
                "m 62.826923,144.57332 c 4.016338,-0.30877 7.851783,1.27247 11.780046,1.78485 0.943928,0.12312 1.932268,-0.23087 2.85577,0 0,0.83293 -0.23798,0.71394 0.35697,0.71394",
                "m 63.897835,161.70793 c 0.594952,0.23798 1.154408,0.59932 1.784858,0.71394 1.404852,0.25543 2.870118,-0.20193 4.283651,0 0.97136,0.13877 1.8879,0.55263 2.85577,0.71395 1.973929,0.32898 4.080237,0.17621 6.06851,0.35697 0.91989,0.0836 1.32222,0.35697 2.141828,0.35697"
              ]

    const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))
    async function first_N(){
        for (var i = 0; i < first.length; i++) {
            d3.select("#svg1")
            .append('path')
            .attr('class', 'path')
            .attr('fill', "none")
            .attr('stroke', "#008844"	)
            .attr('stroke-width', "5")
            .attr('stroke-linejoin',"miter")
            .attr('stroke-linecap',"butt")
            .attr('d', first[i]);
            console.log(i);
            await sleep(500);
        }
    }
    first_N()

    async function middle_N(){
        for (var j = 0; j < middle.length; j++) {
            d3.select("#svg2")
            .append('path')
            .attr('class', 'path')
            .attr('fill', "none")
            .attr('stroke', "#008844")
            .attr('stroke-width', "5")
            .attr('stroke-linejoin',"miter")
            .attr('stroke-linecap',"butt")
            .attr('d', middle[j]);
            console.log(j);
            await sleep(500);
        }
    }
    middle_N()

    async function last_N(){
        for (var k = 0; k < last.length; k++) {
            d3.select("#svg3")
            .append('path')
            .attr('class', 'path')
            .attr('fill', "none")
            .attr('stroke', "#008844")
            .attr('stroke-width', "5")
            .attr('stroke-linejoin',"miter")
            .attr('stroke-linecap',"butt")
            .attr('d', last[k]);
            console.log(k);
            await sleep(500);
        }
    }
    last_N()

    </script>
  </html>